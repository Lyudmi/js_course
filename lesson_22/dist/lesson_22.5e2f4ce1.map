{"version":3,"sources":["location_api.js","dom.js","weather.js","index.js"],"names":["LocationApi","fetch","then","resolve","status","json","Error","catch","console","log","reject","your_Ip","Dom","loader","document","getElementById","btn","div","style","display","parametr","lng","longitude","lat","latitude","innerHTML","city","cyty","city_name","WeatherApi","my_api_key","country","clouds","temp","data","kTemp","main","name","sys","weather","description","toFixed","my_Api","dom","Weatherbutton","addEventListener","setTimeout","showPreloader","getMyIp","getMyLocation","ip","setCoordinates","getOpenWeather","setOpenWeather","hidePreloader","value","error","res"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AGAA;;;;AACA;;;;AACA;;;;;;AAGA,IAAM0C,SAAS,IAAI1C,sBAAJ,EAAf;AACA,IAAM2C,MAAM,IAAI/B,aAAJ,EAAZ;AACA,IAAM2B,UAAU,IAAIV,iBAAJ,EAAhB;AACA,IAAMe,gBAAgB9B,SAASC,cAAT,CAAwB,YAAxB,CAAtB;AACAC,IAAI6B,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;;AAEhCC,eAAW,YAAM;AACbH,YAAII,aAAJ;AACAL,eAAOM,OAAP,GACS9C,IADT,CACc;AAAA,mBAAWwC,OAAOO,aAAP,CAAqB9C,QAAQ+C,EAA7B,CAAX;AAAA,SADd,EAEShD,IAFT,CAEc,mBAAW;AACbyC,gBAAIQ,cAAJ,CAAmBhD,OAAnB;AACA;AACA;AACA,mBAAOoC,QAAQa,cAAR,CAAuBjD,QAAQuB,IAA/B,CAAP;AACH,SAPT,EAQSxB,IART,CAQc,mBAAW;AACb;AACAqC,oBAAQc,cAAR,CAAuBlD,OAAvB;AACAwC,gBAAIW,aAAJ;AACnB,SAZO;AAaQ;AAbR,SAcS/C,KAdT,CAce,kBAAU;AACbC,oBAAQC,GAAR,CAAY,QAAZ,EAAsBC,MAAtB;AACnB,SAhBO;AAiBH,KAnBD,EAmBG,GAnBH;AAoBH,CAtBD;;AAwBAkC,cAAcC,gBAAd,CAA+B,OAA/B,EAAwC,YAAM;AAC1CF,QAAII,aAAJ;AACA,QAAIQ,QAAQzC,SAASC,cAAT,CAAwB,WAAxB,CAAZ;AACA,QAAGwC,MAAMA,KAAN,IAAe,EAAlB,EAAsB;AAClBb,eAAOM,OAAP,GACC9C,IADD,CACM;AAAA,mBAAWwC,OAAOO,aAAP,CAAqB9C,QAAQ+C,EAA7B,CAAX;AAAA,SADN,EAEShD,IAFT,CAEc,mBAAW;AACbyC,gBAAIQ,cAAJ,CAAmBhD,OAAnB;AACA;AACA;AACA,mBAAOoC,QAAQa,cAAR,CAAuBjD,QAAQuB,IAA/B,CAAP;AACH,SAPT,EAQSxB,IART,CAQc,mBAAW;AACb;AACAqC,oBAAQc,cAAR,CAAuBlD,OAAvB;AACAwC,gBAAIW,aAAJ;AACnB,SAZO,EAcS/C,KAdT,CAce;AAAA,mBAASC,QAAQC,GAAR,CAAY+C,KAAZ,CAAT;AAAA,SAdf;AAgBH,KAjBD,MAkBK;;AAEDjB,gBAAQa,cAAR,CAAuBG,MAAMA,KAA7B,EACCrD,IADD,CACM;AAAA,mBAAOqC,QAAQc,cAAR,CAAuBI,GAAvB,CAAP;AAAA,SADN,EAECvD,IAFD,CAEM;AAAA,mBAAOyC,IAAIW,aAAJ,EAAP;AAAA,SAFN,EAIC/C,KAJD,CAIO;AAAA,mBAASC,QAAQC,GAAR,CAAY+C,KAAZ,CAAT;AAAA,SAJP;AAKH;AACJ,CA7BD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IDjCqB3B;AACjB,0BAAe;AAAA;;AACX,aAAKC,UAAL,GAAkB,kCAAlB;AACA,aAAKJ,IAAL,GAAYZ,SAASC,cAAT,CAAwB,MAAxB,CAAZ;AACA,aAAKgB,OAAL,GAAejB,SAASC,cAAT,CAAwB,SAAxB,CAAf;AACN,aAAKiB,MAAL,GAAclB,SAASC,cAAT,CAAwB,QAAxB,CAAd;AACM,aAAKkB,IAAL,GAAYnB,SAASC,cAAT,CAAwB,MAAxB,CAAZ;AAEH;;;;uCAEcW,MAAM;AAClB;AACC,mBAAOzB,6DAA2DyB,IAA3D,eAAyE,KAAKI,UAA9E,EACF5B,IADE,CACG,mBAAW;AACb,oBAAGC,QAAQC,MAAR,KAAmB,GAAtB,EAA2B;AACvB,2BAAOD,QAAQE,IAAR,EAAP;AACH,iBAFD,MAEO;AACH,0BAAM,IAAIC,KAAJ,CAAU,OAAV,CAAN;AACH;AACJ,aAPE,CAAP;AAQH;;;uCAEc4B,MAAM;AACjB;AACA,iBAAKC,KAAL,GAAaD,KAAKE,IAAL,CAAUH,IAAvB;AACA;AACA,iBAAKP,IAAL,CAAUD,SAAV,GAAsBS,KAAKG,IAA3B;AACA,iBAAKN,OAAL,CAAaN,SAAb,GAAyBS,KAAKI,GAAL,CAASP,OAAlC;AACA,iBAAKC,MAAL,CAAYP,SAAZ,GAAwBS,KAAKK,OAAL,CAAa,CAAb,EAAgBC,WAAxC;AACA,iBAAKP,IAAL,CAAUR,SAAV,GAAsB,CAAC,KAAKU,KAAL,GAAW,MAAZ,EAAoBM,OAApB,CAA4B,CAA5B,CAAtB;;AAEA;AAEH;;;;;;kBAjCgBZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IFAA7B;;;;;;;kCACP;;AAEN,mBAAOC,MAAM,mCAAN,EACFC,IADE,CACG,mBAAW;AACb,oBAAGC,QAAQC,MAAR,KAAmB,GAAtB,EAA2B;AACvB,2BAAOD,QAAQE,IAAR,EAAP;AACH,iBAFD,MAEO;AACH,0BAAM,IAAIC,KAAJ,CAAU,UAAV,CAAN;AACH;AACJ,aAPE,EAQFC,KARE,CAQI;AAAA,uBAAUC,QAAQC,GAAR,CAAY,YAAZ,EAA0BC,MAA1B,CAAV;AAAA,aARJ,CAAP;AASH;;;sCAEaC,SAAS;AACnB,mBAAOV,MAAM,gCAAgCU,OAAtC,EACFT,IADE,CACI,mBAAW;AACd,oBAAIC,QAAQC,MAAR,KAAmB,GAAvB,EAA4B;AACxB,2BAAOD,QAAQE,IAAR,EAAP;AACH;AACF,sBAAM,IAAIC,KAAJ,CAAU,OAAV,CAAN;AACF,aANE,EAOFC,KAPE,CAOI;AAAA,uBAAUC,QAAQC,GAAR,CAAY,YAAYC,MAAxB,CAAV;AAAA,aAPJ,CAAP;AAQH;;;;;;kBAvBgBV;AA0BpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC1BoBY;AACjB,mBAAc;AAAA;;AACV,aAAKC,MAAL,GAAcC,SAASC,cAAT,CAAwB,QAAxB,CAAd;AACA,aAAKC,GAAL,GAAWF,SAASC,cAAT,CAAwB,KAAxB,CAAX;AACA,aAAKE,GAAL,GAAWH,SAASC,cAAT,CAAwB,KAAxB,CAAX;AACH;;;;wCAEgB;AACb,iBAAKF,MAAL,CAAYK,KAAZ,CAAkBC,OAAlB,GAA4B,QAA5B;AACAL,qBAASC,cAAT,CAAwB,KAAxB,EAA+BG,KAA/B,CAAqCC,OAArC,GAA+C,MAA/C;AACAL,qBAASC,cAAT,CAAwB,KAAxB,EAA+BG,KAA/B,CAAqCC,OAArC,GAA+C,MAA/C;AACH;;;wCAEgB;;AAEb,iBAAKN,MAAL,CAAYK,KAAZ,CAAkBC,OAAlB,GAA4B,MAA5B;AACAL,qBAASC,cAAT,CAAwB,KAAxB,EAA+BG,KAA/B,CAAqCC,OAArC,GAA+C,OAA/C;AACAL,qBAASC,cAAT,CAAwB,KAAxB,EAA+BG,KAA/B,CAAqCC,OAArC,GAA+C,OAA/C;AAEP;;;uCAGkBC,UAAU;AAChB,iBAAKC,GAAL,GAAWD,SAASE,SAApB;AACA,iBAAKC,GAAL,GAAWH,SAASI,QAApB;AACAhB,oBAAQC,GAAR,CAAY,KAAKY,GAAjB,EAAsB,KAAKE,GAA3B;AACA;AACA;;AAEA,iBAAKN,GAAL,CAASQ,SAAT,GAAqB,2BAA2B,KAAKJ,GAAhC,GAAsC,2BAAtC,GAAoE,KAAKE,GAAzE,GAAgF,eAArG;;AAEA;AACR;;;mCACUG,MAAM;AACb,iBAAKC,IAAL,GAAYD,KAAKE,SAAjB;AAEP;;;;;;kBApCoBhB","file":"lesson_22.5e2f4ce1.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\r\n    getMyIp() {\r\n        \r\n        return fetch('https://api.ipify.org?format=json')\r\n            .then(resolve => {\r\n                if(resolve.status === 200) {\r\n                    return resolve.json();\r\n                } else {\r\n                    throw new Error('error ip');\r\n                }\r\n            })\r\n            .catch(reject => console.log('error ip: ', reject));\r\n    };\r\n    \r\n    getMyLocation(your_Ip) {\r\n        return fetch('https://freegeoip.net/json/' + your_Ip )\r\n            .then (resolve => {\r\n                if (resolve.status === 200) {\r\n                    return resolve.json();\r\n                }\r\n               throw new Error('error');\r\n            })\r\n            .catch(reject => console.log('Error: ' + reject));\r\n    }\r\n    \r\n   \r\n};","export default class Dom {\r\n    constructor() {\r\n        this.loader = document.getElementById('loader');\r\n        this.btn = document.getElementById('btn');\r\n        this.div = document.getElementById('div');\r\n    }\r\n\r\n    showPreloader () {\r\n        this.loader.style.display = \"block \";\r\n        document.getElementById(\"btn\").style.display = \"none\";\r\n        document.getElementById(\"div\").style.display = \"none\";\r\n    }\r\n\r\n    hidePreloader () {\r\n        \r\n        this.loader.style.display = 'none';\r\n        document.getElementById(\"btn\").style.display = \"block\";\r\n        document.getElementById(\"div\").style.display = \"block\";\r\n        \r\n}\r\n\r\n\r\n    setCoordinates(parametr) {\r\n             this.lng = parametr.longitude; \r\n             this.lat = parametr.latitude;\r\n             console.log(this.lng, this.lat);\r\n             //this.msg = `Longitude: ${this.lng }, Latitude: ${this.lat}`;\r\n             //document.write(this.msg);\r\n             \r\n             this.div.innerHTML = \"<div><span>Longitude: \" + this.lng + \",</span><span> Latitude: \" + this.lat  + \"</span></div>\";\r\n             \r\n             //document.body.appendChild(this.div);\r\n    };\r\n    setWeather(city) {\r\n        this.cyty = city.city_name;\r\n        \r\n};\r\n        \r\n}","export default class WeatherApi {\r\n    constructor () {\r\n        this.my_api_key = '6dd89f65a86b21f15123b05abd8a3cc4';\r\n        this.city = document.getElementById(\"city\");\r\n        this.country = document.getElementById(\"country\");\r\n\t\tthis.clouds = document.getElementById(\"clouds\");\r\n        this.temp = document.getElementById(\"temp\");\r\n\t\t\r\n    }\r\n    \r\n    getOpenWeather(city) {\r\n       // console.log(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${this.my_api_key}`);\r\n        return fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${this.my_api_key}`)\r\n            .then(resolve => {\r\n                if(resolve.status === 200) {\r\n                    return resolve.json();\r\n                } else {\r\n                    throw new Error('error');\r\n                }\r\n            })\r\n    }\r\n\r\n    setOpenWeather(data) {\r\n        //console.log(data);\r\n        this.kTemp = data.main.temp;\r\n        //console.log(this.kTemp);\r\n        this.city.innerHTML = data.name;\r\n        this.country.innerHTML = data.sys.country;\r\n        this.clouds.innerHTML = data.weather[0].description;\r\n        this.temp.innerHTML = (this.kTemp-273.15).toFixed(0);\r\n       \r\n        //console.log(this.tempC);\r\n        \r\n    }\r\n}","import LocationApi from './location_api';\r\nimport Dom from './dom';\r\nimport WeatherApi from './weather';\r\n\r\n\r\nconst my_Api = new LocationApi();\r\nconst dom = new Dom();\r\nconst weather = new WeatherApi();\r\nconst Weatherbutton = document.getElementById(\"weatherApi\");\r\nbtn.addEventListener('click', () => {\r\n    \r\n    setTimeout(() => {\r\n        dom.showPreloader();\r\n        my_Api.getMyIp()\r\n                .then(resolve => my_Api.getMyLocation(resolve.ip))\r\n                .then(resolve => {\r\n                    dom.setCoordinates(resolve);\r\n                    //console.log(resolve.city);\r\n                    // console.log(weather.getOpenWeather(resolve.city));\r\n                    return weather.getOpenWeather(resolve.city);\r\n                })\r\n                .then(resolve => {\r\n                    //console.log(resolve);\r\n                    weather.setOpenWeather(resolve);\r\n                    dom.hidePreloader();\r\n})\r\n                // .then(resolved => dom.hidePreloader())\r\n                .catch(reject => {\r\n                    console.log('Error:', reject);\r\n});\r\n    }, 400);\r\n})\r\n\r\nWeatherbutton.addEventListener(\"click\", () => {\r\n    dom.showPreloader();\r\n    let value = document.getElementById(\"your_city\");\r\n    if(value.value == \"\") {\r\n        my_Api.getMyIp()\r\n        .then(resolve => my_Api.getMyLocation(resolve.ip))\r\n                .then(resolve => {\r\n                    dom.setCoordinates(resolve);\r\n                    //console.log(resolve.city);\r\n                    // console.log(weather.getOpenWeather(resolve.city));\r\n                    return weather.getOpenWeather(resolve.city);\r\n                })\r\n                .then(resolve => {\r\n                    //console.log(resolve);\r\n                    weather.setOpenWeather(resolve);\r\n                    dom.hidePreloader();\r\n})\r\n\r\n                .catch(error => console.log(error));\r\n        \r\n    } \r\n    else { \r\n       \r\n        weather.getOpenWeather(value.value)\r\n        .then(res => weather.setOpenWeather(res))\r\n        .then(res => dom.hidePreloader())\r\n\r\n        .catch(error => console.log(error));\r\n    }\r\n});"]}